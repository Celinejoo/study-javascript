<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" id="todo" />
    <button id="add-btn">추가하기</button>

    <ul id="todo-list"></ul>
  </body>
  <script>
    //input 요소 가져오가
    const todoinput = document.getElementById("todo");
    //button 요소 가져오기
    const btn = document.getElementById("add-btn");
    //const delBtn = document.getElementById("del-btn");
    //ul
    const todoList = document.getElementById("todo-list");
    const todoArray = [];

    function addTodo() {
      const inputValue = todoinput.value.trim();
      if (inputValue !== "") {
        todoArray.push(inputValue);
        todoinput.value = "";
        renderTodos();
        saveTodos();
      }
    }
    function renderTodos() {
      todoList.innerHTML = "";

      todoArray.forEach((todo, index) => {
        const li = document.createElement("li");
        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "삭제";
        li.textContent = todo; // 텍스트 넣고
        li.appendChild(deleteBtn);
        todoList.appendChild(li);

        deleteBtn.addEventListener("click", () => {
          deleteTodo(index);
        });
      });
    }

    function deleteTodo(index) {
      todoArray.splice(index, 1);
      renderTodos();
      saveTodos();
    }

    function saveTodos() {
      localStorage.setItem("todos", JSON.stringify(todoArray));
      // getItem으로 문자열을 가져오고
      // JSON.parse()로 다시 배열로 변환해!
      // todoArray에 펼쳐서(push ...) 넣어주고
      // renderTodos()로 화면 다시 그려주기
    }

    function loadTodos() {
      const savedTodos = localStorage.getItem("todos");
      if (savedTodos) {
        todoArray.push(...JSON.parse(savedTodos));
        renderTodos();
      }
    }

    btn.addEventListener("click", addTodo);
    loadTodos();
  </script>
</html>
